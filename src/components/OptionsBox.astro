---
const { buttonId, divId, buttonLabel } = Astro.props;
---

<button id={buttonId} data-button-id={buttonId} data-div-id={divId}>
  {buttonLabel}
</button>

<div id={divId} data-div-id={divId} class="options-box hidden">
  <slot />
</div>

<script>
  // Get show button and div from each OptionsBox instance
  document.querySelectorAll("[data-button-id]").forEach((button) => {
    const divId = button.dataset.divId;
    const target = document.getElementById(divId);

    // Show div on click
    button.addEventListener("click", () => {
      target.classList.remove("hidden");
    });
  });

  // Handle done buttons
  document.querySelectorAll(".done").forEach((doneButton) => {
    doneButton.addEventListener("click", () => {
      const box = doneButton.closest(".options-box");
      if (box) box.classList.add("hidden");
    });
  });
</script>
